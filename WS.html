<!DOCTYPE html>
<html lang="fa" dir="rtl">

<head>
  <meta charset="UTF-8" />
  <title>Ø³Ø¤Ø§Ù„Ø§Øª ÙˆØµÙ„ Ú©Ø±Ø¯Ù†ÛŒ Ø³ÙˆØ§Ø¯ Ø±Ø³Ø§Ù†Ù‡â€ŒØ§ÛŒ</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <style>
    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background: linear-gradient(135deg, #0f172a 0%, #1e293b 100%);
      color: #e5e7eb;
      margin: 0;
      padding: 20px;
      min-height: 100vh;
    }

    .container {
      max-width: 1100px;
      margin: auto;
      background: rgba(2, 6, 23, 0.95);
      border-radius: 20px;
      padding: 30px;
      box-shadow: 0 15px 35px rgba(0, 0, 0, 0.5);
      border: 1px solid rgba(37, 99, 235, 0.3);
    }

    .header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 30px;
      padding-bottom: 20px;
      border-bottom: 1px solid rgba(148, 163, 184, 0.2);
    }

    .header h1 {
      margin: 0;
      color: #60a5fa;
      font-size: 2rem;
      text-align: center;
      flex: 1;
    }

    .back-btn {
      background: linear-gradient(145deg, #374151, #1f2937);
      color: #e5e7eb;
      border: none;
      padding: 10px 20px;
      border-radius: 10px;
      cursor: pointer;
      font-size: 14px;
      display: flex;
      align-items: center;
      gap: 8px;
      transition: all 0.3s;
    }

    .back-btn:hover {
      background: linear-gradient(145deg, #4b5563, #374151);
      transform: translateX(-5px);
    }

    .score-panel {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
      gap: 15px;
      margin-bottom: 30px;
    }

    .score-card {
      background: rgba(30, 41, 59, 0.6);
      padding: 15px;
      border-radius: 12px;
      text-align: center;
      border: 1px solid rgba(96, 165, 250, 0.2);
    }

    .score-label {
      font-size: 14px;
      color: #94a3b8;
      margin-bottom: 5px;
    }

    .score-value {
      font-size: 24px;
      font-weight: bold;
      color: #60a5fa;
    }

    .matching-section {
      margin-bottom: 40px;
      background: rgba(30, 41, 59, 0.3);
      border-radius: 15px;
      padding: 25px;
      border: 1px solid rgba(96, 165, 250, 0.1);
    }

    .matching-section h2 {
      text-align: center;
      color: #c7d2fe;
      margin-top: 0;
      margin-bottom: 25px;
      font-size: 1.5rem;
      padding-bottom: 15px;
      border-bottom: 1px solid rgba(148, 163, 184, 0.2);
    }

    .matching-container {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 40px;
      margin-bottom: 20px;
    }

    .column {
      border: 2px solid #334155;
      border-radius: 15px;
      padding: 20px;
      display: flex;
      flex-direction: column;
      gap: 15px;
      background: rgba(2, 6, 23, 0.6);
      transition: border-color 0.3s;
    }

    .column.active {
      border-color: #2563eb;
      box-shadow: 0 0 0 2px rgba(37, 99, 235, 0.2);
    }

    .column-header {
      display: flex;
      justify-content: center;
      align-items: center;
      font-weight: bold;
      font-size: 18px;
      color: #93c5fd;
      padding: 10px;
      background: rgba(37, 99, 235, 0.1);
      border-radius: 10px;
      margin-bottom: 10px;
    }

    .item {
      background: rgba(30, 41, 59, 0.8);
      border: 2px solid #4b5563;
      border-radius: 12px;
      padding: 15px;
      cursor: pointer;
      text-align: center;
      font-size: 16px;
      transition: all 0.3s ease;
      position: relative;
      overflow: hidden;
      min-height: 60px;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .item:hover {
      border-color: #60a5fa;
      transform: translateY(-2px);
      box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
    }

    .item.selected {
      border-color: #2563eb;
      background: rgba(37, 99, 235, 0.2);
      animation: pulse 1.5s infinite;
    }

    .item.matched {
      border-color: #16a34a;
      background: rgba(22, 163, 74, 0.2);
      cursor: default;
    }

    .item.wrong {
      border-color: #dc2626;
      background: rgba(220, 38, 38, 0.2);
      animation: shake 0.5s;
    }

    .match-line {
      position: absolute;
      background: #60a5fa;
      height: 3px;
      pointer-events: none;
      z-index: 1;
      transform-origin: left;
    }

    .action-buttons {
      display: flex;
      gap: 15px;
      margin-top: 20px;
      justify-content: center;
    }

    .action-btn {
      flex: 1;
      padding: 15px 25px;
      border-radius: 12px;
      border: none;
      font-size: 16px;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 10px;
      max-width: 250px;
    }

    .check-btn {
      background: linear-gradient(145deg, #2563eb, #1d4ed8);
      color: white;
    }

    .check-btn:hover {
      background: linear-gradient(145deg, #1d4ed8, #2563eb);
      transform: translateY(-2px);
      box-shadow: 0 5px 15px rgba(37, 99, 235, 0.4);
    }

    .reset-btn {
      background: linear-gradient(145deg, #374151, #1f2937);
      color: #e5e7eb;
    }

    .reset-btn:hover {
      background: linear-gradient(145deg, #4b5563, #374151);
      transform: translateY(-2px);
    }

    .result-panel {
      text-align: center;
      margin-top: 15px;
      padding: 20px;
      border-radius: 12px;
      display: none;
      animation: fadeIn 0.5s ease;
    }

    .result-panel.success {
      background: rgba(22, 163, 74, 0.1);
      border: 1px solid #16a34a;
      color: #86efac;
    }

    .result-panel.error {
      background: rgba(220, 38, 38, 0.1);
      border: 1px solid #dc2626;
      color: #fca5a5;
    }

    .result-panel.info {
      background: rgba(59, 130, 246, 0.1);
      border: 1px solid #3b82f6;
      color: #93c5fd;
    }

    .final-result {
      margin-top: 40px;
      padding: 30px;
      background: rgba(30, 41, 59, 0.8);
      border-radius: 15px;
      border: 1px solid rgba(96, 165, 250, 0.2);
      display: none;
      animation: fadeIn 0.5s ease;
    }

    .final-result h3 {
      color: #60a5fa;
      text-align: center;
      margin-top: 0;
      margin-bottom: 20px;
    }

    .final-score {
      font-size: 48px;
      font-weight: bold;
      color: #10b981;
      text-align: center;
      margin: 20px 0;
    }

    .score-breakdown {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
      gap: 15px;
      margin: 25px 0;
    }

    .breakdown-item {
      background: rgba(2, 6, 23, 0.6);
      padding: 15px;
      border-radius: 10px;
      text-align: center;
    }

    .breakdown-label {
      font-size: 14px;
      color: #94a3b8;
      margin-bottom: 5px;
    }

    .breakdown-value {
      font-size: 24px;
      font-weight: bold;
      color: #e5e7eb;
    }

    @keyframes pulse {
      0% {
        box-shadow: 0 0 0 0 rgba(37, 99, 235, 0.4);
      }

      70% {
        box-shadow: 0 0 0 10px rgba(37, 99, 235, 0);
      }

      100% {
        box-shadow: 0 0 0 0 rgba(37, 99, 235, 0);
      }
    }

    @keyframes shake {

      0%,
      100% {
        transform: translateX(0);
      }

      25% {
        transform: translateX(-5px);
      }

      75% {
        transform: translateX(5px);
      }
    }

    @keyframes fadeIn {
      from {
        opacity: 0;
        transform: translateY(20px);
      }

      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    @media(max-width: 768px) {
      .container {
        padding: 20px;
      }

      .matching-container {
        grid-template-columns: 1fr;
        gap: 20px;
      }

      .header {
        flex-direction: column;
        gap: 15px;
      }

      .header h1 {
        font-size: 1.5rem;
      }

      .action-buttons {
        flex-direction: column;
      }

      .action-btn {
        max-width: 100%;
      }
    }
  </style>
</head>

<body>
  <div class="container">
    <!-- Ù‡Ø¯Ø± Ø¨Ø§ Ø¯Ú©Ù…Ù‡ Ø¨Ø±Ú¯Ø´Øª -->
    <div class="header">
      <button class="back-btn" onclick="goBackToMenu()">
        â† Ø¨Ø§Ø²Ú¯Ø´Øª Ø¨Ù‡ Ù…Ù†ÙˆÛŒ Ø§ØµÙ„ÛŒ
      </button>
      <h1>ğŸ”— Ø³Ø¤Ø§Ù„Ø§Øª ÙˆØµÙ„ Ú©Ø±Ø¯Ù†ÛŒ Ø³ÙˆØ§Ø¯ Ø±Ø³Ø§Ù†Ù‡â€ŒØ§ÛŒ</h1>
    </div>

    <!-- Ù¾Ù†Ù„ Ø§Ù…ØªÛŒØ§Ø² -->
    <div class="score-panel">
      <div class="score-card">
        <div class="score-label">Ø¬Ø¯ÙˆÙ„â€ŒÙ‡Ø§ÛŒ ØªÚ©Ù…ÛŒÙ„ Ø´Ø¯Ù‡</div>
        <div class="score-value" id="completed-tables">0/2</div>
      </div>
      <div class="score-card">
        <div class="score-label">Ø§ØªØµØ§Ù„â€ŒÙ‡Ø§ÛŒ ØµØ­ÛŒØ­</div>
        <div class="score-value" id="correct-matches">0</div>
      </div>
      <div class="score-card">
        <div class="score-label">Ø§Ù…ØªÛŒØ§Ø² ÙØ¹Ù„ÛŒ</div>
        <div class="score-value" id="current-score">0</div>
      </div>
      <div class="score-card">
        <div class="score-label">Ø¯Ø±ØµØ¯ Ù…ÙˆÙÙ‚ÛŒØª</div>
        <div class="score-value" id="success-rate">0%</div>
      </div>
    </div>

    <!-- Ø¬Ø¯ÙˆÙ„ Ø´Ù…Ø§Ø±Ù‡ Û± -->
    <div class="matching-section">
      <h2>ğŸ¯ Ø¬Ø¯ÙˆÙ„ Ø´Ù…Ø§Ø±Ù‡ Û±: ÙÙ†ÙˆÙ† Ø§Ù‚Ù†Ø§Ø¹</h2>
      <div class="matching-container" id="matching1">
        <div class="column" id="matching1-left"> <!-- ØªØºÛŒÛŒØ±: id="matching1-left" -->
          <div class="column-header">Ø³ØªÙˆÙ† Ø¨</div>
        </div>
        <div class="column" id="matching1-right"> <!-- ØªØºÛŒÛŒØ±: id="matching1-right" -->
          <div class="column-header">Ø³ØªÙˆÙ† Ø§Ù„Ù</div>
        </div>
      </div>
      <div class="action-buttons">
        <button class="action-btn reset-btn" onclick="resetMatches('matching1')">
          ğŸ”„ Ø§ØµÙ„Ø§Ø­ Ø§ØªØµØ§Ù„â€ŒÙ‡Ø§
        </button>
        <button class="action-btn check-btn" onclick="checkResult('matching1')">
          âœ… Ø¨Ø±Ø±Ø³ÛŒ Ù¾Ø§Ø³Ø®â€ŒÙ‡Ø§
        </button>
      </div>
      <div class="result-panel" id="result1"></div>
    </div>

    <!-- Ø¬Ø¯ÙˆÙ„ Ø´Ù…Ø§Ø±Ù‡ Û² -->
    <div class="matching-section">
      <h2>ğŸ“š Ø¬Ø¯ÙˆÙ„ Ø´Ù…Ø§Ø±Ù‡ Û²: Ù„Ø§ÛŒÙ‡â€ŒÙ‡Ø§ÛŒ Ù¾ÛŒØ§Ù…</h2>
      <div class="matching-container" id="matching2">
        <div class="column" id="matching2-left"> <!-- ØªØºÛŒÛŒØ±: id="matching2-left" -->
          <div class="column-header">Ø³ØªÙˆÙ† Ø¨</div>
        </div>
        <div class="column" id="matching2-right"> <!-- ØªØºÛŒÛŒØ±: id="matching2-right" -->
          <div class="column-header">Ø³ØªÙˆÙ† Ø§Ù„Ù</div>
        </div>
      </div>
      <div class="action-buttons">
        <button class="action-btn reset-btn" onclick="resetMatches('matching2')">
          ğŸ”„ Ø§ØµÙ„Ø§Ø­ Ø§ØªØµØ§Ù„â€ŒÙ‡Ø§
        </button>
        <button class="action-btn check-btn" onclick="checkResult('matching2')">
          âœ… Ø¨Ø±Ø±Ø³ÛŒ Ù¾Ø§Ø³Ø®â€ŒÙ‡Ø§
        </button>
      </div>
      <div class="result-panel" id="result2"></div>
    </div>

    <!-- Ø¯Ú©Ù…Ù‡ Ù†Ù…Ø§ÛŒØ´ Ù†ØªÛŒØ¬Ù‡ Ù†Ù‡Ø§ÛŒÛŒ -->
    <div class="action-buttons" style="margin-top: 40px;">
      <button class="action-btn check-btn" onclick="showFinalResults()" id="final-btn" style="max-width: 300px;">
        ğŸ† Ù†Ù…Ø§ÛŒØ´ Ù†ØªÛŒØ¬Ù‡ Ù†Ù‡Ø§ÛŒÛŒ
      </button>
    </div>

    <!-- Ù¾Ù†Ù„ Ù†ØªÛŒØ¬Ù‡ Ù†Ù‡Ø§ÛŒÛŒ -->
    <div class="final-result" id="final-result">
      <h3>ğŸ‰ Ù†ØªÛŒØ¬Ù‡ Ø¢Ø²Ù…ÙˆÙ† ÙˆØµÙ„ Ú©Ø±Ø¯Ù†ÛŒ</h3>
      <div class="final-score" id="final-score-display">0%</div>

      <div class="score-breakdown">
        <div class="breakdown-item">
          <div class="breakdown-label">Ø¬Ø¯ÙˆÙ„â€ŒÙ‡Ø§ÛŒ ØªÚ©Ù…ÛŒÙ„ Ø´Ø¯Ù‡</div>
          <div class="breakdown-value" id="final-completed">0/2</div>
        </div>
        <div class="breakdown-item">
          <div class="breakdown-label">Ø§ØªØµØ§Ù„â€ŒÙ‡Ø§ÛŒ ØµØ­ÛŒØ­</div>
          <div class="breakdown-value" id="final-correct">0</div>
        </div>
        <div class="breakdown-item">
          <div class="breakdown-label">Ù…Ø¬Ù…ÙˆØ¹ Ø§Ù…ØªÛŒØ§Ø²</div>
          <div class="breakdown-value" id="final-total">0</div>
        </div>
        <div class="breakdown-item">
          <div class="breakdown-label">Ø¯Ø±ØµØ¯ Ù…ÙˆÙÙ‚ÛŒØª</div>
          <div class="breakdown-value" id="final-percentage">0%</div>
        </div>
      </div>

      <div id="result-message" style="text-align: center; margin: 20px 0; font-size: 18px;"></div>

      <div class="action-buttons">
        <button class="action-btn reset-btn" onclick="restartQuiz()" style="max-width: 200px;">
          ğŸ”„ Ø´Ø±ÙˆØ¹ Ù…Ø¬Ø¯Ø¯
        </button>
        <button class="action-btn check-btn" onclick="saveAndReturn()" style="max-width: 200px;">
          ğŸ’¾ Ø°Ø®ÛŒØ±Ù‡ Ùˆ Ø¨Ø§Ø²Ú¯Ø´Øª
        </button>
      </div>
    </div>
  </div>

  <script>
    // Ø¯Ø§Ø¯Ù‡â€ŒÙ‡Ø§ÛŒ Ø³ÙˆØ§Ù„Ø§Øª
    const tables = {
      'matching1': {
        leftItems: ["ØªØ¯Ø§Ø¹ÛŒ Ù…Ø¹Ø§Ù†ÛŒ", "Ú¯ÙˆØ§Ù‡ÛŒ Ø¯Ø§Ø¯Ù† Ø³ØªØ§Ø±Ù‡â€ŒÙ‡Ø§", "Ø´Ø¯Øª", "ØªØ±Ø³"],
        rightItems: [
          "Ù†Ø´Ø§Ù† Ø¯Ø§Ø¯Ù† Ú©Ø§Ù„Ø§ Ø¨Ø§ Ø§Ø­Ø³Ø§Ø³Ø§Øª Ø´Ø§Ø¯ÛŒ Ùˆ Ù‚Ø¯Ø±Øª",
          "Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø§Ø² Ú†Ù‡Ø±Ù‡â€ŒÙ‡Ø§ÛŒ Ù…Ø­Ø¨ÙˆØ¨",
          "Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø§Ø² Ú©Ù„Ù…Ø§Øª Ù¾Ø±Ø·Ù…Ø·Ø±Ø§Ù‚ Ùˆ Ø¨Ø²Ø±Ú¯â€ŒÙ†Ù…Ø§ÛŒÛŒ ÙˆÛŒÚ˜Ú¯ÛŒâ€ŒÙ‡Ø§",
          "ØµØ­Ø¨Øª Ø¯Ø± Ù…ÙˆØ±Ø¯ Ø®Ø·Ø±Ø§Øª Ùˆ Ø§ÛŒØ¬Ø§Ø¯ Ù†Ú¯Ø±Ø§Ù†ÛŒâ€ŒÙ‡Ø§"
        ],
        correctMatches: {
          "ØªØ¯Ø§Ø¹ÛŒ Ù…Ø¹Ø§Ù†ÛŒ": "Ù†Ø´Ø§Ù† Ø¯Ø§Ø¯Ù† Ú©Ø§Ù„Ø§ Ø¨Ø§ Ø§Ø­Ø³Ø§Ø³Ø§Øª Ø´Ø§Ø¯ÛŒ Ùˆ Ù‚Ø¯Ø±Øª",
          "Ú¯ÙˆØ§Ù‡ÛŒ Ø¯Ø§Ø¯Ù† Ø³ØªØ§Ø±Ù‡â€ŒÙ‡Ø§": "Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø§Ø² Ú†Ù‡Ø±Ù‡â€ŒÙ‡Ø§ÛŒ Ù…Ø­Ø¨ÙˆØ¨",
          "Ø´Ø¯Øª": "Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø§Ø² Ú©Ù„Ù…Ø§Øª Ù¾Ø±Ø·Ù…Ø·Ø±Ø§Ù‚ Ùˆ Ø¨Ø²Ø±Ú¯â€ŒÙ†Ù…Ø§ÛŒÛŒ ÙˆÛŒÚ˜Ú¯ÛŒâ€ŒÙ‡Ø§",
          "ØªØ±Ø³": "ØµØ­Ø¨Øª Ø¯Ø± Ù…ÙˆØ±Ø¯ Ø®Ø·Ø±Ø§Øª Ùˆ Ø§ÛŒØ¬Ø§Ø¯ Ù†Ú¯Ø±Ø§Ù†ÛŒâ€ŒÙ‡Ø§"
        },
        completed: false,
        score: 0
      },
      'matching2': {
        leftItems: ["Ø±Ø³Ø§Ù†Ù‡", "Ú©Ù„ÛŒØ´Ù‡", "ÙØ±Ø§Ù…ØªÙ†", "Ù…ØªÙ†"],
        rightItems: [
          "Ù‡Ø± Ú†ÛŒØ²ÛŒ Ú©Ù‡ Ø­Ø§Ù…Ù„ Ù¾ÛŒØ§Ù… Ø§Ø³Øª",
          "Ù†Ø³Ø¨Øª Ø¯Ø§Ø¯Ù† Ùˆ ØªØ¹Ù…ÛŒÙ… ØµÙØª Ø¨Ù‡ ÛŒÚ© Ú¯Ø±ÙˆÙ‡",
          "Ø´Ø±Ø§ÛŒØ· Ø²Ù…Ø§Ù†ÛŒØŒ Ù…Ú©Ø§Ù†ÛŒ Ùˆ ÙØ±Ù‡Ù†Ú¯ÛŒ Ø¯Ø±ÛŒØ§ÙØª Ù¾ÛŒØ§Ù…",
          "Ø¢Ù†Ú†Ù‡ Ù…Ø³ØªÙ‚ÛŒÙ…Ø§Ù‹ Ø¯Ø± Ù¾ÛŒØ§Ù… Ù…ÛŒâ€ŒØ¨ÛŒÙ†ÛŒÙ… ÛŒØ§ Ù…ÛŒâ€ŒØ´Ù†ÙˆÛŒÙ…"
        ],
        correctMatches: {
          "Ø±Ø³Ø§Ù†Ù‡": "Ù‡Ø± Ú†ÛŒØ²ÛŒ Ú©Ù‡ Ø­Ø§Ù…Ù„ Ù¾ÛŒØ§Ù… Ø§Ø³Øª",
          "Ú©Ù„ÛŒØ´Ù‡": "Ù†Ø³Ø¨Øª Ø¯Ø§Ø¯Ù† Ùˆ ØªØ¹Ù…ÛŒÙ… ØµÙØª Ø¨Ù‡ ÛŒÚ© Ú¯Ø±ÙˆÙ‡",
          "ÙØ±Ø§Ù…ØªÙ†": "Ø´Ø±Ø§ÛŒØ· Ø²Ù…Ø§Ù†ÛŒØŒ Ù…Ú©Ø§Ù†ÛŒ Ùˆ ÙØ±Ù‡Ù†Ú¯ÛŒ Ø¯Ø±ÛŒØ§ÙØª Ù¾ÛŒØ§Ù…",
          "Ù…ØªÙ†": "Ø¢Ù†Ú†Ù‡ Ù…Ø³ØªÙ‚ÛŒÙ…Ø§Ù‹ Ø¯Ø± Ù¾ÛŒØ§Ù… Ù…ÛŒâ€ŒØ¨ÛŒÙ†ÛŒÙ… ÛŒØ§ Ù…ÛŒâ€ŒØ´Ù†ÙˆÛŒÙ…"
        },
        completed: false,
        score: 0
      }
    };

    // Ù…ØªØºÛŒØ±Ù‡Ø§ÛŒ Ø³Ø±Ø§Ø³Ø±ÛŒ
    let totalCorrect = 0;
    let totalPossible = 0;
    let selectedItem = null;
    const matches = {
      'matching1': {},
      'matching2': {}
    };

    // ØªØ§Ø¨Ø¹ Ø¨Ø±Ú¯Ø´Øª Ø¨Ù‡ Ù…Ù†ÙˆÛŒ Ø§ØµÙ„ÛŒ
    function goBackToMenu() {
      if (totalCorrect > 0) {
        if (confirm('Ø¢ÛŒØ§ Ù…ÛŒâ€ŒØ®ÙˆØ§Ù‡ÛŒØ¯ Ø¨Ù‡ Ù…Ù†ÙˆÛŒ Ø§ØµÙ„ÛŒ Ø¨Ø§Ø²Ú¯Ø±Ø¯ÛŒØ¯ØŸ Ù†ØªØ§ÛŒØ¬ Ø°Ø®ÛŒØ±Ù‡ Ø®ÙˆØ§Ù‡Ø¯ Ø´Ø¯.')) {
          saveScore();
          window.location.href = 'index.html';
        }
      } else {
        window.location.href = 'index.html';
      }
    }

    // ØªØ§Ø¨Ø¹ Ø°Ø®ÛŒØ±Ù‡ Ù†Ù…Ø±Ù‡
    function saveScore() {
      const percentage = totalPossible > 0 ? Math.round((totalCorrect / totalPossible) * 100) : 0;
      localStorage.setItem('matchingScore', percentage);
    }

    // ØªØ§Ø¨Ø¹ Ø§ÛŒØ¬Ø§Ø¯ Ø³ÙˆØ§Ù„Ø§Øª
    // ØªØ§Ø¨Ø¹ Ø§ÛŒØ¬Ø§Ø¯ Ø³ÙˆØ§Ù„Ø§Øª - Ù†Ø³Ø®Ù‡ Ø§ØµÙ„Ø§Ø­ Ø´Ø¯Ù‡
    function createMatchingTable(tableId) {
      const table = tables[tableId];

      // Ù¾ÛŒØ¯Ø§ Ú©Ø±Ø¯Ù† Ø³ØªÙˆÙ†â€ŒÙ‡Ø§ Ø¨Ø§ Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø§Ø² selector Ø¯Ø±Ø³Øª
      const container = document.getElementById(tableId);
      const columns = container.querySelectorAll('.column');

      if (columns.length < 2) {
        console.error('Ø³ØªÙˆÙ†â€ŒÙ‡Ø§ Ù¾ÛŒØ¯Ø§ Ù†Ø´Ø¯Ù†Ø¯!');
        return;
      }

      const leftCol = columns[0];
      const rightCol = columns[1];

      // Ù¾Ø§Ú© Ú©Ø±Ø¯Ù† Ù…Ø­ØªÙˆØ§ÛŒ ÙØ¹Ù„ÛŒ (Ø¨Ù‡ Ø¬Ø² Ù‡Ø¯Ø±)
      leftCol.innerHTML = '<div class="column-header">Ø³ØªÙˆÙ† Ø¨</div>';
      rightCol.innerHTML = '<div class="column-header">Ø³ØªÙˆÙ† Ø§Ù„Ù</div>';

      // Ø¨Ù‡ Ù‡Ù… Ø²Ø¯Ù† Ø¢ÛŒØªÙ…â€ŒÙ‡Ø§
      const shuffledLeft = [...table.leftItems].sort(() => Math.random() - 0.5);
      const shuffledRight = [...table.rightItems].sort(() => Math.random() - 0.5);

      // Ø§Ø¶Ø§ÙÙ‡ Ú©Ø±Ø¯Ù† Ø¢ÛŒØªÙ…â€ŒÙ‡Ø§
      shuffledLeft.forEach((item, index) => {
        const itemDiv = document.createElement('div');
        itemDiv.className = 'item';
        itemDiv.id = `${tableId}-left-${index}`;
        itemDiv.textContent = item;
        itemDiv.dataset.value = item;
        itemDiv.addEventListener('click', () => selectItem(itemDiv, tableId, 'left'));
        leftCol.appendChild(itemDiv);
      });

      shuffledRight.forEach((item, index) => {
        const itemDiv = document.createElement('div');
        itemDiv.className = 'item';
        itemDiv.id = `${tableId}-right-${index}`;
        itemDiv.textContent = item;
        itemDiv.dataset.value = item;
        itemDiv.addEventListener('click', () => selectItem(itemDiv, tableId, 'right'));
        rightCol.appendChild(itemDiv);
      });
    }

    // ØªØ§Ø¨Ø¹ Ø§Ù†ØªØ®Ø§Ø¨ Ø¢ÛŒØªÙ…
    function selectItem(item, tableId, side) {
      // Ø§Ú¯Ø± Ù‚Ø¨Ù„Ø§Ù‹ ÙˆØµÙ„ Ø´Ø¯Ù‡ØŒ Ú©Ø§Ø±ÛŒ Ù†Ú©Ù†
      if (item.classList.contains('matched')) return;

      const container = document.getElementById(tableId);

      // Ø­Ø°Ù Ø§Ù†ØªØ®Ø§Ø¨ Ù‚Ø¨Ù„ÛŒ Ø¯Ø± Ù‡Ù…ÛŒÙ† Ø¬Ø¯ÙˆÙ„
      container.querySelectorAll('.item.selected').forEach(el => {
        if (!el.classList.contains('matched')) {
          el.classList.remove('selected');
        }
      });

      // Ø§Ù†ØªØ®Ø§Ø¨ Ø¢ÛŒØªÙ… Ø¬Ø¯ÛŒØ¯
      item.classList.add('selected');

      if (!selectedItem) {
        // Ø§ÙˆÙ„ÛŒÙ† Ø¢ÛŒØªÙ… Ø§Ù†ØªØ®Ø§Ø¨ Ø´Ø¯Ù‡
        selectedItem = { element: item, tableId, side };
        // Ù‡Ø§ÛŒÙ„Ø§ÛŒØª Ø³ØªÙˆÙ† Ù…Ø±Ø¨ÙˆØ·Ù‡
        const column = side === 'left'
          ? document.getElementById(`${tableId}-left`)
          : document.getElementById(`${tableId}-right`);
        column.classList.add('active');
      } else {
        // Ø¯ÙˆÙ…ÛŒÙ† Ø¢ÛŒØªÙ… Ø§Ù†ØªØ®Ø§Ø¨ Ø´Ø¯Ù‡
        if (selectedItem.tableId === tableId && selectedItem.side !== side) {
          // Ø§ÛŒØ¬Ø§Ø¯ Ø§ØªØµØ§Ù„
          createMatch(selectedItem.element, item, tableId);
        }

        // Ø±ÛŒØ³Øª Ø§Ù†ØªØ®Ø§Ø¨
        container.querySelectorAll('.column').forEach(col => col.classList.remove('active'));
        selectedItem = null;
      }
    }

    // ØªØ§Ø¨Ø¹ Ø§ÛŒØ¬Ø§Ø¯ Ø§ØªØµØ§Ù„
    function createMatch(leftItem, rightItem, tableId) {
      const leftValue = leftItem.dataset.value;
      const rightValue = rightItem.dataset.value;

      // Ø¹Ù„Ø§Ù…Øªâ€ŒÚ¯Ø°Ø§Ø±ÛŒ Ø¢ÛŒØªÙ…â€ŒÙ‡Ø§ Ø¨Ù‡ Ø¹Ù†ÙˆØ§Ù† ÙˆØµÙ„ Ø´Ø¯Ù‡
      leftItem.classList.remove('selected');
      rightItem.classList.remove('selected');
      leftItem.classList.add('matched');
      rightItem.classList.add('matched');

      // Ø°Ø®ÛŒØ±Ù‡ Ø§ØªØµØ§Ù„
      matches[tableId][leftValue] = rightValue;

      // Ø§ÛŒØ¬Ø§Ø¯ Ø®Ø· Ø§ØªØµØ§Ù„
    

      // Ø¨Ù‡â€ŒØ±ÙˆØ²Ø±Ø³Ø§Ø±ÛŒ Ù†Ù…Ø§ÛŒØ´
      updateScoreDisplay();
    }

    // ØªØ§Ø¨Ø¹ Ø¨Ø±Ø±Ø³ÛŒ Ù¾Ø§Ø³Ø®â€ŒÙ‡Ø§
    function checkResult(tableId) {
      const table = tables[tableId];
      const userMatches = matches[tableId];
      let correctCount = 0;

      // Ø¨Ø±Ø±Ø³ÛŒ Ù‡Ø± Ø§ØªØµØ§Ù„
      Object.keys(userMatches).forEach(leftValue => {
        const userRightValue = userMatches[leftValue];
        const correctRightValue = table.correctMatches[leftValue];

        if (userRightValue === correctRightValue) {
          correctCount++;
        } else {
          // Ù…Ø´Ø®Øµ Ú©Ø±Ø¯Ù† Ø§ØªØµØ§Ù„ Ø§Ø´ØªØ¨Ø§Ù‡
          const leftItem = document.querySelector(`#${tableId}-left .item[data-value="${leftValue}"]`);
          const rightItem = document.querySelector(`#${tableId}-right .item[data-value="${userRightValue}"]`);

          if (leftItem) leftItem.classList.add('wrong');
          if (rightItem) rightItem.classList.add('wrong');
        }
      });

      table.score = correctCount;
      table.completed = true;

      // Ù†Ù…Ø§ÛŒØ´ Ù†ØªÛŒØ¬Ù‡
      const resultPanel = document.getElementById(`result${tableId.slice(-1)}`);
      resultPanel.style.display = 'block';

      if (correctCount === table.leftItems.length) {
        resultPanel.className = 'result-panel success';
        resultPanel.innerHTML = `
          <div style="font-size: 24px; margin-bottom: 10px;">âœ…</div>
          <div style="font-size: 18px; font-weight: bold;">Ø¹Ø§Ù„ÛŒ!</div>
          <div>Ø´Ù…Ø§ Ù‡Ù…Ù‡ Ø§ØªØµØ§Ù„â€ŒÙ‡Ø§ Ø±Ø§ ØµØ­ÛŒØ­ Ø§Ù†Ø¬Ø§Ù… Ø¯Ø§Ø¯Ù‡â€ŒØ§ÛŒØ¯.</div>
        `;
      } else {
        resultPanel.className = 'result-panel info';
        resultPanel.innerHTML = `
          <div style="font-size: 24px; margin-bottom: 10px;">ğŸ“Š</div>
          <div style="font-size: 18px; font-weight: bold;">${correctCount} Ø§Ø² ${table.leftItems.length}</div>
          <div>Ø§ØªØµØ§Ù„ ØµØ­ÛŒØ­ Ø¯Ø§Ø±ÛŒØ¯.</div>
        `;
      }

      updateScoreDisplay();
    }

    // ØªØ§Ø¨Ø¹ Ø±ÛŒØ³Øª Ø§ØªØµØ§Ù„â€ŒÙ‡Ø§
    function resetMatches(tableId) {
      const container = document.getElementById(tableId);

      // Ù¾Ø§Ú© Ú©Ø±Ø¯Ù† Ø®Ø·ÙˆØ· Ø§ØªØµØ§Ù„
      container.querySelectorAll('.match-line').forEach(line => line.remove());

      // Ø±ÛŒØ³Øª ÙˆØ¶Ø¹ÛŒØª Ø¢ÛŒØªÙ…â€ŒÙ‡Ø§
      container.querySelectorAll('.item').forEach(item => {
        item.classList.remove('selected', 'matched', 'wrong');
      });

      // Ø±ÛŒØ³Øª Ù…ØªØºÛŒØ±Ù‡Ø§
      matches[tableId] = {};
      tables[tableId].completed = false;
      tables[tableId].score = 0;

      // Ù¾Ù†Ù‡Ø§Ù† Ú©Ø±Ø¯Ù† Ù†ØªÛŒØ¬Ù‡
      const resultPanel = document.getElementById(`result${tableId.slice(-1)}`);
      resultPanel.style.display = 'none';

      updateScoreDisplay();
    }

    // ØªØ§Ø¨Ø¹ Ø¨Ù‡â€ŒØ±ÙˆØ²Ø±Ø³Ø§Ù†ÛŒ Ù†Ù…Ø§ÛŒØ´ Ø§Ù…ØªÛŒØ§Ø²
    function updateScoreDisplay() {
      let completedTables = 0;
      let correctMatches = 0;
      let totalMatches = 0;

      Object.keys(tables).forEach(tableId => {
        const table = tables[tableId];
        totalMatches += table.leftItems.length;
        correctMatches += table.score;
        if (table.completed) completedTables++;
      });

      totalCorrect = correctMatches;
      totalPossible = totalMatches;
      const percentage = totalPossible > 0 ? Math.round((correctMatches / totalPossible) * 100) : 0;

      document.getElementById('completed-tables').textContent = `${completedTables}/2`;
      document.getElementById('correct-matches').textContent = correctMatches;
      document.getElementById('current-score').textContent = correctMatches;
      document.getElementById('success-rate').textContent = `${percentage}%`;

      // ÙØ¹Ø§Ù„ Ú©Ø±Ø¯Ù† Ø¯Ú©Ù…Ù‡ Ù†Ù‡Ø§ÛŒÛŒ Ø§Ú¯Ø± Ù‡Ø± Ø¯Ùˆ Ø¬Ø¯ÙˆÙ„ ØªÚ©Ù…ÛŒÙ„ Ø´Ø¯Ù‡ Ø¨Ø§Ø´Ù†Ø¯
      const finalBtn = document.getElementById('final-btn');
      finalBtn.disabled = completedTables < 2;
    }

    // ØªØ§Ø¨Ø¹ Ù†Ù…Ø§ÛŒØ´ Ù†ØªØ§ÛŒØ¬ Ù†Ù‡Ø§ÛŒÛŒ
    function showFinalResults() {
      const percentage = Math.round((totalCorrect / totalPossible) * 100);

      document.getElementById('final-score-display').textContent = `${percentage}%`;
      document.getElementById('final-completed').textContent = '2/2';
      document.getElementById('final-correct').textContent = totalCorrect;
      document.getElementById('final-total').textContent = `${totalCorrect} Ø§Ø² ${totalPossible}`;
      document.getElementById('final-percentage').textContent = `${percentage}%`;

      // Ù†Ù…Ø§ÛŒØ´ Ù¾ÛŒØ§Ù… Ø¨Ø± Ø§Ø³Ø§Ø³ Ù†Ù…Ø±Ù‡
      const resultMessage = document.getElementById('result-message');
      if (percentage === 100) {
        resultMessage.innerHTML = 'ğŸ† <strong>Ø¹Ø§Ù„ÛŒ!</strong> Ø´Ù…Ø§ ØªØ³Ù„Ø· Ú©Ø§Ù…Ù„ Ø¨Ø± Ù…ÙØ§Ù‡ÛŒÙ… Ø¯Ø§Ø±ÛŒØ¯.';
        resultMessage.style.color = '#10b981';
      } else if (percentage >= 75) {
        resultMessage.innerHTML = 'ğŸ‘ <strong>Ø®ÙˆØ¨ Ø§Ø³Øª!</strong> Ø¯Ø§Ù†Ø´ Ø´Ù…Ø§ Ù‚Ø§Ø¨Ù„ Ù‚Ø¨ÙˆÙ„ Ø§Ø³Øª.';
        resultMessage.style.color = '#60a5fa';
      } else if (percentage >= 50) {
        resultMessage.innerHTML = 'ğŸ“š <strong>Ù†ÛŒØ§Ø² Ø¨Ù‡ ØªÙ…Ø±ÛŒÙ† Ø¨ÛŒØ´ØªØ± Ø¯Ø§Ø±ÛŒØ¯.</strong>';
        resultMessage.style.color = '#fbbf24';
      } else {
        resultMessage.innerHTML = 'ğŸ“– <strong>Ù†ÛŒØ§Ø² Ø¨Ù‡ Ù…Ø·Ø§Ù„Ø¹Ù‡ Ø¬Ø¯ÛŒ Ø¯Ø§Ø±ÛŒØ¯.</strong>';
        resultMessage.style.color = '#ef4444';
      }

      // Ù†Ù…Ø§ÛŒØ´ Ù¾Ù†Ù„ Ù†ØªØ§ÛŒØ¬
      document.getElementById('final-result').style.display = 'block';
      document.getElementById('final-result').scrollIntoView({ behavior: 'smooth' });
    }

    // ØªØ§Ø¨Ø¹ Ø´Ø±ÙˆØ¹ Ù…Ø¬Ø¯Ø¯
    function restartQuiz() {
      if (confirm('Ø¢ÛŒØ§ Ù…ÛŒâ€ŒØ®ÙˆØ§Ù‡ÛŒØ¯ Ø¢Ø²Ù…ÙˆÙ† Ø±Ø§ Ù…Ø¬Ø¯Ø¯Ø§Ù‹ Ø´Ø±ÙˆØ¹ Ú©Ù†ÛŒØ¯ØŸ')) {
        Object.keys(tables).forEach(tableId => {
          tables[tableId].completed = false;
          tables[tableId].score = 0;
          matches[tableId] = {};
          resetMatches(tableId);
          createMatchingTable(tableId);
        });

        totalCorrect = 0;
        totalPossible = 0;
        selectedItem = null;

        document.getElementById('final-result').style.display = 'none';
        updateScoreDisplay();
      }
    }

    // ØªØ§Ø¨Ø¹ Ø°Ø®ÛŒØ±Ù‡ Ùˆ Ø¨Ø§Ø²Ú¯Ø´Øª
    function saveAndReturn() {
      saveScore();
      window.location.href = 'index.html';
    }

    // Ù‡Ù†Ú¯Ø§Ù… Ù„ÙˆØ¯ ØµÙØ­Ù‡
    document.addEventListener('DOMContentLoaded', function () {
      // Ø§ÛŒØ¬Ø§Ø¯ Ø¬Ø¯Ø§ÙˆÙ„
      createMatchingTable('matching1');
      createMatchingTable('matching2');

      // Ø¨Ù‡â€ŒØ±ÙˆØ²Ø±Ø³Ø§Ù†ÛŒ Ø§ÙˆÙ„ÛŒÙ‡ Ù†Ù…Ø§ÛŒØ´
      updateScoreDisplay();
    });
  </script>
</body>

</html>